<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>My GitHub Page</title>
  <style>
    /* Style for external links */
    a.external-link {
      color: blue;
      font-weight: bold;
      text-decoration: underline;
      cursor: pointer;
    }
  </style>
</head>
<body>

<h1>Hello, <span id="name"></span>!</h1>

<h2>Contents from My GitHub Repository:</h2>
<ul id="repository-contents"></ul>

<script>
  // Replace 'deekshith0509' and 'YOUR_REPOSITORY_NAME' with your GitHub username and repository name.
  const githubUsername = 'deekshith0509';
  const repositoryName = 'deekshith0509.github.io';

  // Fetch user information from GitHub
  fetch(`https://api.github.com/users/${githubUsername}`)
    .then(response => response.json())
    .then(data => {
      const nameElement = document.getElementById('name');
      nameElement.textContent = data.name || githubUsername;
    })
    .catch(error => console.error('Error fetching user information:', error));

  // Fetch repository contents from GitHub
  fetch(`https://api.github.com/repos/${githubUsername}/${repositoryName}/contents`)
    .then(response => response.json())
    .then(contents => {
      const contentsList = document.getElementById('repository-contents');
      contents.forEach(item => {
        const listItem = document.createElement('li');

        // Check if the item is a file or a directory
        if (item.type === 'file') {
          const fileLink = document.createElement('a');
          fileLink.textContent = item.name;

          // Check if the file is an HTML file
          if (item.name.endsWith('.html')) {
            fileLink.classList.add('external-link'); // Add the external-link class for styling
            fileLink.onclick = () => openHtmlFileInNewTab(item.download_url);
          } else {
            // For non-HTML files, simulate a text viewer
            fileLink.href = item.download_url;
            fileLink.setAttribute('download', item.name);
            fileLink.classList.add('external-link'); // Add the external-link class for styling
          }

          listItem.appendChild(fileLink);
        } else {
          listItem.textContent = item.name;
        }

        contentsList.appendChild(listItem);
      });
    })
    .catch(error => console.error('Error fetching repository contents:', error));

  // Function to open HTML file in a new tab and create a webpage
  function openHtmlFileInNewTab(fileUrl) {
    fetch(fileUrl)
      .then(response => response.text())
      .then(htmlContent => {
        const newWindow = window.open();
        newWindow.document.write(htmlContent);
      })
      .catch(error => console.error('Error fetching HTML content:', error));
  }
</script>

</body>
</html>
